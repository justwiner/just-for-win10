<template>
    <div class="castle-container">
        <div class="castle" ref="castle">
            <div class="brleg"
                style="transform: matrix3d(0.831445, 0.555607, 0, 0, -0.555607, 0.831445, 0, 0, 0, 0, 1, 0, -29.0735, -0.676647, 0, 1);">
                <img class="brfoot" src="../../assets/cast/brfoot.png"
                    style="transform: matrix3d(0.831445, -0.555607, 0, 0, 0.555607, 0.831445, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);">
                <img class="brbottom" src="../../assets/cast/brbottom.png">
            </div>
            <div class="frleg"
                style="transform: matrix3d(0.841393, -0.540423, 0, 0, 0.540423, 0.841393, 0, 0, 0, 0, 1, 0, 30.4299, -1.24079, 0, 1);">
                <img class="frfoot" src="../../assets/cast/frfoot.png"
                    style="transform: matrix3d(0.841393, 0.540423, 0, 0, -0.540423, 0.841393, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);">
                <img class="frbottom" src="../../assets/cast/frbottom.png">
            </div>
            <img class="chimney3" src="../../assets/cast/chimney3.png"
                style="transform: matrix3d(0.985098, -0.171992, 0, 0, 0.171992, 0.985098, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);">
            <img class="treehouse" src="../../assets/cast/treehouse.png"
                style="transform: matrix3d(0.999953, -0.00965588, 0, 0, 0.00965588, 0.999953, 0, 0, 0, 0, 1, 0, 3.8263, 19.2762, 0, 1);">
            <div class="houses-group"
                style="transform: matrix3d(0.999976, 0.00717937, 0, 0, -0.00717937, 0.999976, 0, 0, 0, 0, 1, 0, -1.8818, 2.64775, 0, 1);">
                <img class="point6" src="../../assets/cast/point6.png"
                    style="transform: translate3d(3.73111px, -9.32778px, 0px);">
                <img class="point5" src="../../assets/cast/point5.png"
                    style="transform: translate3d(2.265px, -4.55px, 0px);">
                <img class="point4" src="../../assets/cast/point4.png"
                    style="transform: translate3d(0px, 1.785px, 0px);">
                <img class="houses" src="../../assets/cast/houses.png">
            </div>
            <img class="chimney2" src="../../assets/cast/chimney2.png"
                style="transform: matrix3d(0.993643, -0.112573, 0, 0, 0.112573, 0.993643, 0, 0, 0, 0, 1, 0, 0, 4.711, 0, 1);">
            <img class="chimney1" src="../../assets/cast/chimney1.png"
                style="transform: matrix3d(0.999471, 0.0325214, 0, 0, -0.0325214, 0.999471, 0, 0, 0, 0, 1, 0, 3.02, -11.325, 0, 1);">
            <img class="wing" src="../../assets/cast/wing.png"
                style="transform: matrix3d(0.999548, 0.0300614, 0, 0, -0.0300614, 0.999548, 0, 0, 0, 0, 1, 0, -0.46225, 0, 0, 1);">
            <div class="mound-group"
                style="transform: matrix3d(0.999904, -0.0138688, 0, 0, 0.0138688, 0.999904, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);">
                <img class="antenna" src="../../assets/cast/antenna.png"
                    style="transform: matrix3d(0.994516, 0.104585, 0, 0, -0.104585, 0.994516, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);">
                <img class="point3" src="../../assets/cast/point3.png">
                <img class="point2" src="../../assets/cast/point2.png"
                    style="transform: matrix3d(0.998932, -0.0461955, 0, 0, 0.0461955, 0.998932, 0, 0, 0, 0, 1, 0, 1.0591, 2.64775, 0, 1);">
                <img class="point1" src="../../assets/cast/point1.png"
                    style="transform: matrix3d(0.997113, -0.075929, 0, 0, 0.075929, 0.997113, 0, 0, 0, 0, 1, 0, -0.9409, 1.0591, 0, 1);">
                <img class="mound" src="../../assets/cast/mound.png">
            </div>
            <img class="wind" src="../../assets/cast/wind.png"
                style="transform: matrix3d(0.993177, -0.116617, 0, 0, 0.116617, 0.993177, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);">
            <img class="cannon" src="../../assets/cast/cannon.png"
                style="transform: matrix3d(0.999193, -0.0401781, 0, 0, 0.0401781, 0.999193, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);">
            <img class="main" src="../../assets/cast/main.png">
            <div class="blleg"
                style="transform: matrix3d(0.722957, -0.690893, 0, 0, 0.682914, 0.714608, 0, 0, 0, 0, 1, 0, 14.8618, 0, 0, 1);">
                <div class="blbottom-group"
                    style="transform: matrix3d(0.650475, 0.759528, 0, 0, -0.522898, 0.447821, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);">
                    <img class="blfoot" src="../../assets/cast/flfoot.png"
                        style="transform: matrix3d(0.994976, -0.238219, 0, 0, 0.350607, 1.46439, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);">
                    <img class="blbottom" src="../../assets/cast/flbottom.png">
                </div>
                <img class="bltop" src="../../assets/cast/fltop.png">
            </div>
            <img class="blcover" src="../../assets/cast/blcover.png">
            <img class="knob" src="../../assets/cast/knob.png"
                style="transform: matrix3d(0.817019, 0.576611, 0, 0, -0.576611, 0.817019, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);">
            <img class="tele" src="../../assets/cast/tele.png"
                style="transform: matrix3d(0.999903, -0.0139508, 0, 0, 0.0139508, 0.999903, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);">
            <img class="telecover" src="../../assets/cast/telecover.png">
            <div class="flleg"
                style="transform: matrix3d(0.802025, 0.597291, 0, 0, -0.553097, 0.742683, 0, 0, 0, 0, 1, 0, -9.94568, 0, 0, 1);">
                <div class="flbottom-group"
                    style="transform: matrix3d(0.951335, 0.308158, 0, 0, -0.251157, 0.775362, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);">
                    <img class="flfoot" src="../../assets/cast/flfoot.png"
                        style="transform: matrix3d(0.698244, -1.09177, 0, 0, 1.06061, 0.678312, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);">
                    <img class="flbottom" src="../../assets/cast/flbottom.png">
                </div>
                <img class="fltop" src="../../assets/cast/fltop.png">
            </div>
            <img class="flcover" src="../../assets/cast/flcover.png">
        </div>
    </div>
</template>

<script>
import {TweenMax, TweenLite, TimelineMax, Linear, Power3, Power2, Power1} from 'gsap'

export default {
    name: 'cast',
    data () {
        return {
            runId: null,
            speed: 0.9,
            WIDTH: null,
            HEIGHT: null,
            castleWidth: null,
            scale: null,
            control: false,
            flleg: null, // 前左脚
            frleg: null, // 前右脚
            blleg: null, // 后左脚
            brleg: null, // 后右脚
            body: null, // 整体身体
            headLeft: null, // 左上角的头
            wing: null, // 尾巴
            chimney1: null, // 房子旁边的烟囱1
            chimney2: null, // 房子旁边的烟囱2
            chimney3: null, // 房子旁边的烟囱3
            house: null, // 房子
            houseChimney: null, //房子上的小烟囱
            treeHouse: null, // 瞭望台
            other: null, // 其他小部件
        }
    },
    beforeDestroy () {
        if (this.runId) {
            cancelAnimationFrame(this.runId)
        }
    },
    mounted () {
        this.resize()
    },
    methods: {
        resize (width, height) {
            this.WIDTH = width || this.$parent.$el.offsetWidth;
            this.HEIGHT = height || this.$parent.$el.offsetHeight;
            this.scale = this.WIDTH / (1920 - 40);

            this.castleWidth = this.$refs.castle.offsetWidth * this.scale;
            TweenLite.set(this.$refs.castle, {
                scale: this.scale * 0.85
            });
        },
        init () {
            this.headLeft = new TimelineMax({
                repeat: -1,
                delay: 0.2
            });
            let _mound = document.querySelectorAll('.mound-group');
            TweenLite.set(_mound, {
                rotationZ: 2
            });
            this.headLeft.add([
                TweenLite.to(_mound, 1.0, {
                    rotationZ: -1,
                    delay: 0.0,
                    force3D: true
                }),
                TweenLite.to(_mound, 1.0, {
                    rotationZ: 2,
                    delay: 1.0,
                    force3D: true
                }),
            ]);

            this.wing = new TimelineMax({
                repeat: -1,
                delay: 0.8
            });
            let _wing = document.querySelectorAll('.wing');
            TweenLite.set(_wing, {
                rotationZ: 2
            });
            this.wing.add([
                TweenLite.to(_wing, 1.0, {
                    rotationZ: -1,
                    x: -5,
                    delay: 0.0,
                    force3D: true
                }),
                TweenLite.to(_wing, 1.0, {
                    rotationZ: 2,
                    x: 0,
                    delay: 1.0,
                    force3D: true
                }),
            ]);

            this.chimney1 = new TimelineMax({
                repeat: -1,
                delay: 0.0
            });
            let _chimney1 = document.querySelectorAll('.chimney1');
            TweenLite.set(_chimney1, {
                rotationZ: -10
            });
            this.chimney1.add([
                TweenLite.to(_chimney1, 1.5, {
                    rotationZ: 5,
                    delay: 0.0,
                    force3D: true
                }),

                TweenLite.to(_chimney1, 1.5, {
                    rotationZ: -10,
                    delay: 1.5,
                    force3D: true
                }),

                TweenLite.to(_chimney1, 0.5, {
                    y: 5,
                    x: 0,
                    delay: 0.1,
                    force3D: true
                }),
                TweenLite.to(_chimney1, 0.1, {
                    y: -15,
                    x: 4,
                    delay: 0.6,
                    ease: Power1.easeOut,
                    force3D: true
                }),
                TweenLite.to(_chimney1, 0.9, {
                    y: 0,
                    x: 0,
                    delay: 0.7,
                    force3D: true
                }),

                TweenLite.to(_chimney1, 0.5, {
                    y: 5,
                    x: 0,
                    delay: 1.6,
                    force3D: true
                }),
                TweenLite.to(_chimney1, 0.1, {
                    y: -15,
                    x: 4,
                    delay: 2.1,
                    ease: Power1.easeOut,
                    force3D: true
                }),
                TweenLite.to(_chimney1, 0.5, {
                    y: 0,
                    x: 0,
                    delay: 2.2,
                    force3D: true
                }),
            ]);

            this.chimney2 = new TimelineMax({
                repeat: -1,
                delay: 0.5
            });
            let _chimney2 = document.querySelectorAll('.chimney2');
            TweenLite.set(_chimney2, {
                rotationZ: -10
            });
            this.chimney2.add([
                TweenLite.to(_chimney2, 1.5, {
                    rotationZ: 5,
                    delay: 0.0,
                    force3D: true
                }),

                TweenLite.to(_chimney2, 1.5, {
                    rotationZ: -10,
                    delay: 1.5,
                    force3D: true
                }),

                TweenLite.to(_chimney2, 0.5, {
                    y: 5,
                    x: 0,
                    delay: 0.1,
                    force3D: true
                }),
                TweenLite.to(_chimney2, 0.1, {
                    y: -15,
                    x: 4,
                    delay: 0.6,
                    ease: Power1.easeOut,
                    force3D: true
                }),
                TweenLite.to(_chimney2, 0.9, {
                    y: 0,
                    x: 0,
                    delay: 0.7,
                    force3D: true
                }),

                TweenLite.to(_chimney2, 0.5, {
                    y: 5,
                    x: 0,
                    delay: 1.6,
                    force3D: true
                }),
                TweenLite.to(_chimney2, 0.1, {
                    y: -15,
                    x: 4,
                    delay: 2.1,
                    ease: Power1.easeOut,
                    force3D: true
                }),
                TweenLite.to(_chimney2, 0.5, {
                    y: 0,
                    x: 0,
                    delay: 2.2,
                    force3D: true
                }),
            ]);

            this.chimney3 = new TimelineMax({
                repeat: -1,
                delay: 1.1
            });
            let _chimney3 = document.querySelectorAll('.chimney3');
            TweenLite.set(_chimney3, {
                rotationZ: -10
            });
            this.chimney3.add([
                TweenLite.to(_chimney3, 1.5, {
                    rotationZ: 5,
                    delay: 0.0,
                    force3D: true
                }),

                TweenLite.to(_chimney3, 1.5, {
                    rotationZ: -10,
                    delay: 1.5,
                    force3D: true
                }),

                TweenLite.to(_chimney3, 0.5, {
                    y: 5,
                    x: 0,
                    delay: 0.1,
                    force3D: true
                }),
                TweenLite.to(_chimney3, 0.1, {
                    y: -15,
                    x: 4,
                    delay: 0.6,
                    ease: Power1.easeOut,
                    force3D: true
                }),
                TweenLite.to(_chimney3, 0.9, {
                    y: 0,
                    x: 0,
                    delay: 0.7,
                    force3D: true
                }),

                TweenLite.to(_chimney3, 0.5, {
                    y: 5,
                    x: 0,
                    delay: 1.6,
                    force3D: true
                }),
                TweenLite.to(_chimney3, 0.1, {
                    y: -15,
                    x: 4,
                    delay: 2.1,
                    ease: Power1.easeOut,
                    force3D: true
                }),
                TweenLite.to(_chimney3, 0.5, {
                    y: 0,
                    x: 0,
                    delay: 2.2,
                    force3D: true
                }),
            ]);

            this.house = new TimelineMax({
                repeat: -1,
                delay: 0.5
            });
            let _houses = document.querySelectorAll('.houses-group');
            let _point1 = document.querySelectorAll('.point1');
            let _point2 = document.querySelectorAll('.point2');
            TweenLite.set(_houses, {
                rotationZ: 2,
                x: -4
            });
            TweenLite.set(_point1, {
                rotationZ: 2,
                x: -2
            });
            this.house.add([
                TweenLite.to(_houses, 1.0, {
                    rotationZ: -1,
                    y: 5,
                    x: 0,
                    delay: 0.0,
                    force3D: true
                }),
                TweenLite.to(_houses, 1.0, {
                    rotationZ: 2,
                    y: 0,
                    x: -4,
                    delay: 1.0,
                    force3D: true
                }),

                TweenLite.to(_point1, 1.0, {
                    rotationZ: -10,
                    y: 2,
                    x: 0,
                    delay: 0.0,
                    force3D: true
                }),
                TweenLite.to(_point1, 1.0, {
                    rotationZ: 2,
                    y: 0,
                    x: -2,
                    delay: 1.0,
                    force3D: true
                }),

                TweenLite.to(_point2, 1.0, {
                    rotationZ: -5,
                    y: 5,
                    x: 2,
                    delay: 0.0,
                    force3D: true
                }),
                TweenLite.to(_point2, 1.0, {
                    rotationZ: 0,
                    y: 0,
                    x: 0,
                    delay: 1.0,
                    force3D: true
                }),
            ]);

            this.houseChimney = new TimelineMax({
                repeat: -1,
                delay: 0.45
            });
            let _point4 = document.querySelectorAll('.point4');
            let _point5 = document.querySelectorAll('.point5');
            let _point6 = document.querySelectorAll('.point6');
            this.houseChimney.add([
                TweenLite.to(_point6, 0.3, {
                    y: 3,
                    delay: 0.0,
                    force3D: true
                }),
                TweenLite.to(_point6, 0.1, {
                    y: -10,
                    x: 4,
                    delay: 0.3,
                    force3D: true
                }),
                TweenLite.to(_point6, 0.9, {
                    y: 0,
                    x: 0,
                    delay: 0.4,
                    force3D: true
                }),

                TweenLite.to(_point5, 0.3, {
                    y: 3,
                    delay: 0.2,
                    force3D: true
                }),
                TweenLite.to(_point5, 0.1, {
                    y: -7,
                    x: 3,
                    delay: 0.5,
                    force3D: true
                }),
                TweenLite.to(_point5, 0.7, {
                    y: 0,
                    x: 0,
                    delay: 0.6,
                    force3D: true
                }),

                TweenLite.to(_point4, 0.3, {
                    y: 3,
                    delay: 0.4,
                    force3D: true
                }),
                TweenLite.to(_point4, 0.1, {
                    y: -10,
                    x: 4,
                    delay: 0.7,
                    force3D: true
                }),
                TweenLite.to(_point4, 0.7, {
                    y: 0,
                    x: 0,
                    delay: 0.8,
                    force3D: true
                }),
            ]);

            this.treeHouse = new TimelineMax({
                repeat: -1,
                delay: 1.4
            });
            let _treehouse = document.querySelectorAll('.treehouse');
            TweenLite.set(_treehouse, {
                rotationZ: -5,
                y: 20,
                x: 4
            });
            this.treeHouse.add([
                TweenLite.to(_treehouse, 1.0, {
                    rotationZ: 10,
                    delay: 0.0,
                    force3D: true
                }),
                TweenLite.to(_treehouse, 1.0, {
                    rotationZ: -5,
                    delay: 1.0,
                    force3D: true
                }),
                TweenLite.to(_treehouse, 1.0, {
                    rotationZ: 10,
                    delay: 2.0,
                    force3D: true
                }),
                TweenLite.to(_treehouse, 1.0, {
                    rotationZ: -5,
                    delay: 3.0,
                    force3D: true
                }),

                TweenLite.to(_treehouse, 0.4, {
                    y: -5,
                    x: -2,
                    delay: 0.2,
                    force3D: true
                }),
                TweenLite.to(_treehouse, 3.2, {
                    y: 20,
                    x: 4,
                    delay: 0.8,
                    force3D: true
                }),
            ]);

            this.other = new TimelineMax({
                repeat: -1,
                delay: 0.65
            });
            let _wind = document.querySelectorAll('.wind');
            let _antenna = document.querySelectorAll('.antenna');
            let _cannon = document.querySelectorAll('.cannon');
            let _tele = document.querySelectorAll('.tele');
            let _knob = document.querySelectorAll('.knob');
            TweenLite.set(_antenna, {
                rotationZ: 10,
                x: 0
            });
            TweenLite.set(_wind, {
                rotationZ: -10,
                x: 0
            });
            TweenLite.set(_knob, {
                rotationZ: -20,
                x: 0
            });
            this.other.add([
                TweenLite.to(_antenna, 1.0, {
                    rotationZ: -5,
                    x: 0,
                    delay: 0.0,
                    force3D: true
                }),
                TweenLite.to(_antenna, 1.0, {
                    rotationZ: 10,
                    x: 5,
                    delay: 1.0,
                    force3D: true
                }),
                TweenLite.to(_antenna, 1.0, {
                    rotationZ: -10,
                    x: -5,
                    delay: 2.0,
                    force3D: true
                }),
                TweenLite.to(_antenna, 1.0, {
                    rotationZ: 10,
                    x: 0,
                    delay: 3.0,
                    force3D: true
                }),

                TweenLite.to(_wind, 1.1, {
                    rotationZ: 5,
                    delay: 0.0,
                    force3D: true
                }),
                TweenLite.to(_wind, 1.0, {
                    rotationZ: -15,
                    delay: 1.1,
                    force3D: true
                }),
                TweenLite.to(_wind, 1.0, {
                    rotationZ: 10,
                    delay: 2.1,
                    force3D: true
                }),
                TweenLite.to(_wind, 0.9, {
                    rotationZ: -10,
                    delay: 3.1,
                    force3D: true
                }),

                TweenLite.to(_knob, 0.2, {
                    rotationZ: 50,
                    delay: 0.0,
                    force3D: true
                }),
                TweenLite.to(_knob, 0.2, {
                    rotationZ: -20,
                    delay: 0.3,
                    force3D: true
                }),
                TweenLite.to(_knob, 0.2, {
                    rotationZ: 45,
                    delay: 0.7,
                    force3D: true
                }),
                TweenLite.to(_knob, 0.2, {
                    rotationZ: -25,
                    delay: 1.0,
                    force3D: true
                }),
                TweenLite.to(_knob, 0.2, {
                    rotationZ: 30,
                    delay: 1.5,
                    force3D: true
                }),
                TweenLite.to(_knob, 0.2, {
                    rotationZ: 0,
                    delay: 1.9,
                    force3D: true
                }),
                TweenLite.to(_knob, 0.2, {
                    rotationZ: -20,
                    delay: 2.2,
                    force3D: true
                }),
                TweenLite.to(_knob, 0.3, {
                    rotationZ: 60,
                    delay: 2.6,
                    force3D: true
                }),
                TweenLite.to(_knob, 0.2, {
                    rotationZ: -10,
                    delay: 3.0,
                    force3D: true
                }),
                TweenLite.to(_knob, 0.2, {
                    rotationZ: 40,
                    delay: 3.4,
                    force3D: true
                }),
                TweenLite.to(_knob, 0.2, {
                    rotationZ: -20,
                    delay: 3.7,
                    force3D: true
                }),

                TweenLite.to(_tele, 1.0, {
                    rotationZ: -3,
                    delay: 0.0,
                    force3D: true
                }),
                TweenLite.to(_tele, 1.0, {
                    rotationZ: 2,
                    delay: 1.0,
                    force3D: true
                }),
                TweenLite.to(_tele, 1.0, {
                    rotationZ: -3,
                    delay: 2.0,
                    force3D: true
                }),
                TweenLite.to(_tele, 1.0, {
                    rotationZ: 0,
                    delay: 3.0,
                    force3D: true
                }),

                TweenLite.to(_tele, 0.25, {
                    x: 25,
                    y: 4,
                    delay: 0.6,
                    force3D: true
                }),
                TweenLite.to(_tele, 2.5, {
                    x: 0,
                    y: 0,
                    delay: 0.9,
                    force3D: true
                }),

                TweenLite.to(_cannon, 0.9, {
                    rotationZ: -7,
                    delay: 0.0,
                    force3D: true
                }),
                TweenLite.to(_cannon, 0.9, {
                    rotationZ: 2,
                    delay: 0.9,
                    force3D: true
                }),
                TweenLite.to(_cannon, 1.1, {
                    rotationZ: -5,
                    delay: 1.8,
                    force3D: true
                }),
                TweenLite.to(_cannon, 1.1, {
                    rotationZ: 0,
                    delay: 2.9,
                    force3D: true
                }),

                TweenLite.to(_cannon, 0.25, {
                    x: 30,
                    y: 4,
                    delay: 0.85,
                    force3D: true
                }),
                TweenLite.to(_cannon, 2.6, {
                    x: 0,
                    y: 0,
                    delay: 1.4,
                    force3D: true
                }),
            ]);
        },
        run () {
            if (!this.flleg) {
                this.flleg = new TimelineMax({
                    repeat: -1,
                    onReverseComplete: function () {
                        this.seek(this.flleg.duration())
                    }
                });

                let _flleg = document.querySelectorAll('.flleg');
                let _flbottomGroup = document.querySelectorAll('.flbottom-group');
                let _flfoot = document.querySelectorAll('.flfoot');

                TweenLite.set(_flleg, {
                    rotationZ: 45,
                    x: -5
                });
                TweenLite.set(_flbottomGroup, {
                    rotationZ: 5
                });
                TweenLite.set(_flfoot, {
                    rotationZ: -50
                });

                this.flleg.add([
                    TweenLite.to(_flleg, 1.0, {
                        rotationZ: -45,
                        delay: 0.0,
                        force3D: true
                    }),

                    TweenLite.to(_flleg, 0.2, {
                        x: 0,
                        delay: 0.0,
                        ease: Power1.easeOut,
                        force3D: true
                    }),

                    TweenLite.to(_flleg, 0.55, {
                        scaleY: 0.8,
                        delay: 0.0,
                        force3D: true
                    }),
                    TweenLite.to(_flbottomGroup, 0.55, {
                        scaleY: 0.8,
                        delay: 0.0,
                        force3D: true
                    }),
                    TweenLite.to(_flbottomGroup, 0.6, {
                        rotationZ: 20,
                        delay: 0.0,
                        ease: Power3.easeIn,
                        force3D: true
                    }),
                    TweenLite.to(_flfoot, 0.55, {
                        scaleY: 1.5,
                        delay: 0.0,
                        force3D: true
                    }),
                    TweenLite.to(_flfoot, 0.6, {
                        rotationZ: 10,
                        delay: 0.0,
                        ease: Power2.easeIn,
                        force3D: true
                    }),

                    TweenLite.to(_flleg, 0.4, {
                        scaleY: 1.0,
                        delay: 0.6,
                        force3D: true
                    }),
                    TweenLite.to(_flbottomGroup, 0.4, {
                        scaleY: 0.7,
                        delay: 0.6,
                        force3D: true
                    }),
                    TweenLite.to(_flbottomGroup, 0.4, {
                        rotationZ: 50,
                        delay: 0.6,
                        force3D: true
                    }),
                    TweenLite.to(_flfoot, 0.2, {
                        rotationZ: 10,
                        delay: 0.6,
                        ease: Linear.easeNone,
                        force3D: true
                    }),
                    TweenLite.to(_flfoot, 0.2, {
                        rotationZ: -10,
                        delay: 0.8,
                        ease: Power1.easeOut,
                        force3D: true
                    }),
                    TweenLite.to(_flfoot, 0.4, {
                        scaleY: 1.5,
                        delay: 0.6,
                        force3D: true
                    }),

                    TweenLite.to(_flleg, 0.6, {
                        x: 20,
                        delay: 0.7,
                        force3D: true
                    }),

                    TweenLite.to(_flleg, 0.5, {
                        rotationZ: 0,
                        delay: 1.0,
                        ease: Power1.easeIn,
                        force3D: true
                    }),
                    TweenLite.to(_flleg, 0.5, {
                        scaleY: 0.8,
                        delay: 1.0,
                        force3D: true
                    }),
                    TweenLite.to(_flbottomGroup, 0.5, {
                        scaleY: 0.5,
                        delay: 1.0,
                        force3D: true
                    }),
                    TweenLite.to(_flfoot, 0.5, {
                        scaleX: 1.8,
                        scaleY: 1.7,
                        delay: 1.0,
                        ease: Power1.easeIn,
                        force3D: true
                    }),
                    TweenLite.to(_flbottomGroup, 0.5, {
                        rotationZ: 40,
                        delay: 1.0,
                        force3D: true
                    }),
                    TweenLite.to(_flfoot, 0.5, {
                        rotationZ: -70,
                        delay: 1.0,
                        force3D: true
                    }),

                    TweenLite.to(_flleg, 0.5, {
                        rotationZ: 45,
                        delay: 1.5,
                        ease: Power1.easeOut,
                        force3D: true
                    }),
                    TweenLite.to(_flleg, 0.5, {
                        scaleY: 1.0,
                        delay: 1.5,
                        force3D: true
                    }),
                    TweenLite.to(_flbottomGroup, 0.5, {
                        scaleY: 1.0,
                        delay: 1.5,
                        force3D: true
                    }),
                    TweenLite.to(_flbottomGroup, 0.5, {
                        rotationZ: 5,
                        delay: 1.5,
                        force3D: true
                    }),
                    TweenLite.to(_flfoot, 0.5, {
                        rotationZ: -50,
                        delay: 1.5,
                        force3D: true
                    }),
                    TweenLite.to(_flfoot, 0.5, {
                        scaleX: 1.0,
                        scaleY: 1.0,
                        delay: 1.5,
                        force3D: true
                    }),

                    TweenLite.to(_flleg, 0.5, {
                        x: -10,
                        delay: 1.3,
                        force3D: true
                    }),

                    TweenLite.to(_flleg, 0.2, {
                        x: -5,
                        delay: 1.8,
                        ease: Power1.easeIn,
                        force3D: true
                    }),
                ]);
            } else {
                this.flleg.play()
            }

            if (!this.blleg) {
                this.blleg = new TimelineMax({
                    repeat: -1,
                    delay: 0.7,
                    onReverseComplete: function () {
                        this.seek(this.blleg.duration())
                    }
                });

                let _blleg = document.querySelectorAll('.blleg');
                let _blbottomGroup = document.querySelectorAll('.blbottom-group');
                let _blfoot = document.querySelectorAll('.blfoot');

                TweenLite.set(_blleg, {
                    rotationZ: 45,
                    x: -5
                });
                TweenLite.set(_blbottomGroup, {
                    rotationZ: 5
                });
                TweenLite.set(_blfoot, {
                    rotationZ: -50
                });

                this.blleg.add([
                    TweenLite.to(_blleg, 1.0, {
                        rotationZ: -45,
                        delay: 0.0,
                        force3D: true
                    }),

                    TweenLite.to(_blleg, 0.2, {
                        x: 0,
                        delay: 0.0,
                        ease: Power1.easeOut,
                        force3D: true
                    }),

                    TweenLite.to(_blleg, 0.55, {
                        scaleY: 0.8,
                        delay: 0.0,
                        force3D: true
                    }),
                    TweenLite.to(_blbottomGroup, 0.55, {
                        scaleY: 0.8,
                        delay: 0.0,
                        force3D: true
                    }),
                    TweenLite.to(_blbottomGroup, 0.6, {
                        rotationZ: 20,
                        delay: 0.0,
                        ease: Power3.easeIn,
                        force3D: true
                    }),
                    TweenLite.to(_blfoot, 0.55, {
                        scaleY: 1.5,
                        delay: 0.0,
                        force3D: true
                    }),
                    TweenLite.to(_blfoot, 0.6, {
                        rotationZ: 10,
                        delay: 0.0,
                        ease: Power2.easeIn,
                        force3D: true
                    }),

                    TweenLite.to(_blleg, 0.4, {
                        scaleY: 1.0,
                        delay: 0.6,
                        force3D: true
                    }),
                    TweenLite.to(_blbottomGroup, 0.4, {
                        scaleY: 0.7,
                        delay: 0.6,
                        force3D: true
                    }),
                    TweenLite.to(_blbottomGroup, 0.4, {
                        rotationZ: 50,
                        delay: 0.6,
                        force3D: true
                    }),
                    TweenLite.to(_blfoot, 0.2, {
                        rotationZ: 10,
                        delay: 0.6,
                        ease: Linear.easeNone,
                        force3D: true
                    }),
                    TweenLite.to(_blfoot, 0.2, {
                        rotationZ: -10,
                        delay: 0.8,
                        ease: Power1.easeOut,
                        force3D: true
                    }),
                    TweenLite.to(_blfoot, 0.4, {
                        scaleY: 1.5,
                        delay: 0.6,
                        force3D: true
                    }),

                    TweenLite.to(_blleg, 0.6, {
                        x: 20,
                        delay: 0.7,
                        force3D: true
                    }),

                    TweenLite.to(_blleg, 0.5, {
                        rotationZ: 0,
                        delay: 1.0,
                        ease: Power1.easeIn,
                        force3D: true
                    }),
                    TweenLite.to(_blleg, 0.5, {
                        scaleY: 0.8,
                        delay: 1.0,
                        force3D: true
                    }),
                    TweenLite.to(_blbottomGroup, 0.5, {
                        scaleY: 0.5,
                        delay: 1.0,
                        force3D: true
                    }),
                    TweenLite.to(_blfoot, 0.5, {
                        scaleX: 1.8,
                        scaleY: 1.7,
                        delay: 1.0,
                        ease: Power1.easeIn,
                        force3D: true
                    }),
                    TweenLite.to(_blbottomGroup, 0.5, {
                        rotationZ: 40,
                        delay: 1.0,
                        force3D: true
                    }),
                    TweenLite.to(_blfoot, 0.5, {
                        rotationZ: -70,
                        delay: 1.0,
                        force3D: true
                    }),

                    TweenLite.to(_blleg, 0.5, {
                        rotationZ: 45,
                        delay: 1.5,
                        ease: Power1.easeOut,
                        force3D: true
                    }),
                    TweenLite.to(_blleg, 0.5, {
                        scaleY: 1.0,
                        delay: 1.5,
                        force3D: true
                    }),
                    TweenLite.to(_blbottomGroup, 0.5, {
                        scaleY: 1.0,
                        delay: 1.5,
                        force3D: true
                    }),
                    TweenLite.to(_blbottomGroup, 0.5, {
                        rotationZ: 5,
                        delay: 1.5,
                        force3D: true
                    }),
                    TweenLite.to(_blfoot, 0.5, {
                        rotationZ: -50,
                        delay: 1.5,
                        force3D: true
                    }),
                    TweenLite.to(_blfoot, 0.5, {
                        scaleX: 1.0,
                        scaleY: 1.0,
                        delay: 1.5,
                        force3D: true
                    }),

                    TweenLite.to(_blleg, 0.5, {
                        x: -10,
                        delay: 1.3,
                        force3D: true
                    }),

                    TweenLite.to(_blleg, 0.2, {
                        x: -5,
                        delay: 1.8,
                        ease: Power1.easeIn,
                        force3D: true
                    }),
                ]);
            } else {
                this.blleg.play()
            }
            
            if (!this.frleg) {
                this.frleg = new TimelineMax({
                    repeat: -1,
                    delay: 1.0,
                    onReverseComplete: function () {
                        this.seek(this.frleg.duration())
                    }
                });

                let _frleg = document.querySelectorAll('.frleg');
                let _frfoot = document.querySelectorAll('.frfoot');

                TweenLite.set(_frleg, {
                    rotationZ: 35,
                    x: -40
                });
                TweenLite.set(_frfoot, {
                    rotationZ: -35
                });

                this.frleg.add([
                    TweenLite.to(_frleg, 0.9, {
                        rotationZ: -35,
                        delay: 0.0,
                        force3D: true
                    }),
                    TweenLite.to(_frleg, 1.2, {
                        x: 40,
                        delay: 0.0,
                        ease: Power1.easeOut,
                        force3D: true
                    }),

                    TweenLite.to(_frfoot, 0.9, {
                        rotationZ: 35,
                        delay: 0.0,
                        force3D: true
                    }),

                    TweenLite.to(_frleg, 0.4, {
                        y: -15,
                        delay: 0.0,
                        ease: Power1.easeIn,
                        force3D: true
                    }),
                    TweenLite.to(_frleg, 0.4, {
                        y: 0,
                        delay: 0.5,
                        ease: Power1.easeOut,
                        force3D: true
                    }),

                    TweenLite.to(_frleg, 1.1, {
                        rotationZ: 35,
                        delay: 0.9,
                        force3D: true
                    }),
                    TweenLite.to(_frleg, 0.6, {
                        x: -50,
                        delay: 1.2,
                        force3D: true
                    }),

                    TweenLite.to(_frfoot, 0.5, {
                        rotationZ: -50,
                        delay: 0.9,
                        force3D: true
                    }),
                    TweenLite.to(_frfoot, 0.3, {
                        rotationZ: -35,
                        delay: 1.7,
                        force3D: true
                    }),

                    TweenLite.to(_frleg, 0.6, {
                        y: -40,
                        delay: 0.9,
                        force3D: true
                    }),
                    TweenLite.to(_frleg, 0.5, {
                        y: 0,
                        delay: 1.5,
                        force3D: true
                    }),

                    TweenLite.to(_frleg, 0.2, {
                        x: -40,
                        delay: 1.8,
                        ease: Power1.easeIn,
                        force3D: true
                    }),
                ]);

            } else {
                this.frleg.play()
            }
            
            if (!this.brleg) {
                this.brleg = new TimelineMax({
                    repeat: -1,
                    delay: 1.7,
                    onReverseComplete: function () {
                        this.seek(this.brleg.duration())
                    }
                });

                let _brleg = document.querySelectorAll('.brleg');
                let _brfoot = document.querySelectorAll('.brfoot');

                TweenLite.set(_brleg, {
                    rotationZ: 35,
                    x: -40
                });
                TweenLite.set(_brfoot, {
                    rotationZ: -35
                });

                this.brleg.add([
                    TweenLite.to(_brleg, 0.9, {
                        rotationZ: -35,
                        delay: 0.0,
                        force3D: true
                    }),
                    TweenLite.to(_brleg, 1.2, {
                        x: 40,
                        delay: 0.0,
                        ease: Power1.easeOut,
                        force3D: true
                    }),

                    TweenLite.to(_brfoot, 0.9, {
                        rotationZ: 35,
                        delay: 0.0,
                        force3D: true
                    }),

                    TweenLite.to(_brleg, 0.4, {
                        y: -15,
                        delay: 0.0,
                        ease: Power1.easeIn,
                        force3D: true
                    }),
                    TweenLite.to(_brleg, 0.4, {
                        y: 0,
                        delay: 0.5,
                        ease: Power1.easeOut,
                        force3D: true
                    }),

                    TweenLite.to(_brleg, 1.1, {
                        rotationZ: 35,
                        delay: 0.9,
                        force3D: true
                    }),
                    TweenLite.to(_brleg, 0.6, {
                        x: -50,
                        delay: 1.2,
                        force3D: true
                    }),

                    TweenLite.to(_brfoot, 0.5, {
                        rotationZ: -50,
                        delay: 0.9,
                        force3D: true
                    }),
                    TweenLite.to(_brfoot, 0.3, {
                        rotationZ: -35,
                        delay: 1.7,
                        force3D: true
                    }),

                    TweenLite.to(_brleg, 0.6, {
                        y: -40,
                        delay: 0.9,
                        force3D: true
                    }),
                    TweenLite.to(_brleg, 0.5, {
                        y: 0,
                        delay: 1.5,
                        force3D: true
                    }),

                    TweenLite.to(_brleg, 0.2, {
                        x: -40,
                        delay: 1.8,
                        ease: Power1.easeIn,
                        force3D: true
                    }),
                ]);
            } else {
                this.brleg.play()
            }

            if (!this.body) {
                this.body = new TimelineMax({
                    repeat: -1,
                    delay: 0.0,
                    onReverseComplete: function () {
                        this.seek(this.body.duration())
                    }
                });
                let _castle = document.querySelectorAll('.castle');
                TweenLite.set(_castle, {
                    rotationZ: 2
                });
                this.body.add([
                    TweenLite.to(_castle, 1.0, {
                        rotationZ: 0,
                        delay: 0.0,
                        force3D: true
                    }),
                    TweenLite.to(_castle, 1.0, {
                        rotationZ: 2,
                        delay: 1.0,
                        force3D: true
                    }),

                    TweenLite.to(_castle, 0.5, {
                        x: '+=' + 2 * this.scale,
                        y: '-=' + 4 * this.scale,
                        delay: 0.0,
                        force3D: true
                    }),
                    TweenLite.to(_castle, 0.5, {
                        x: '-=' + 4 * this.scale,
                        y: '+=' + 4 * this.scale,
                        delay: 0.5,
                        force3D: true
                    }),
                    TweenLite.to(_castle, 0.5, {
                        x: '+=' + 4 * this.scale,
                        y: '-=' + 5 * this.scale,
                        delay: 1.0,
                        force3D: true
                    }),
                    TweenLite.to(_castle, 0.5, {
                        x: '-=' + 2 * this.scale,
                        y: '+=' + 5 * this.scale,
                        delay: 1.5,
                        force3D: true
                    }),
                ]);
            } else {
                this.body.play()
            }

        },
        stopRun () {
            this.flleg.pause()
            this.frleg.pause()
            this.blleg.pause()
            this.brleg.pause()
            this.body.pause()
        },
        stop () {
            this.flleg.pause()
            this.frleg.pause()
            this.blleg.pause()
            this.brleg.pause()
            this.headLeft.pause() // 左上角的头
            this.wing.pause() // 尾巴
            this.chimney1.pause() // 房子旁边的烟囱1
            this.chimney2.pause() // 房子旁边的烟囱2
            this.chimney3.pause() // 房子旁边的烟囱3
            this.house.pause() // 房子
            this.houseChimney.pause() //房子上的小烟囱
            this.treeHouse.pause() // 瞭望台
            this.other.pause() // 其他小部件
        },
        jump () {

        }
    }
}
</script>

<style lang="scss">
.castle-container {
    position: absolute;
    z-index: 5;
}
.castle {
    position: relative;
    width: 600px;
    height: 750px;
    perspective: 1000px;
    transform-origin: 50% 70%;
    img,
    .mound-group,
    .houses-group,
    .flbottom-group,
    .blbottom-group,
    .brleg,
    .frleg,
    .blleg,
    .flleg {
        position: absolute;
        transform-style: preserve-3d;
    }
}
.brleg {
    left: 400px;
    top: 625px;
    transform-origin: 10px -10px;
    transform: rotateZ(0deg);
}

.brfoot {
    left: -18px;
    top: 82px;
    transform-origin: 56% 44%;
    transform: rotateZ(0deg);
}

.brbottom {}

.frleg {
    left: 240px;
    top: 653px;
    transform-origin: 8px -10px;
    transform: rotateZ(0deg);
}

.frfoot {
    left: -18px;
    top: 51px;
    transform-origin: 56% 44%;
    transform: rotateZ(0deg);
}

.frbottom {}

.chimney3 {
    left: 400px;
    top: 30px;
    transform-origin: 45% 120%;
    transform: rotateZ(0deg);
}
.houses-group {
    left: 305px;
    top: 130px;
    transform-origin: -50px 300px;
    transform: rotateZ(1deg);
}

.point6 {
    left: 84px;
    top: 19px;
    transform-origin: 40% 120%;
    transform: rotateZ(0deg);
}

.point5 {
    left: 70px;
    top: -23px;
    transform-origin: -40% 200%;
    transform: rotateZ(0deg);
}

.point4 {
    left: 40px;
    top: -17px;
    transform-origin: 0% 100%;
    transform: rotateZ(0deg);
}
.houses {}

.treehouse {
    left: 220px;
    top: 10px;
    transform-origin: 50% 150%;
    transform: rotateZ(0deg);
}

.chimney2 {
    left: 430px;
    top: 120px;
    transform-origin: 0% 90%;
    transform: rotateZ(0deg);
}

.chimney1 {
    left: 420px;
    top: 90px;
    transform-origin: -10% 90%;
    transform: rotateZ(0deg);
}

.wing {
    left: 420px;
    top: 370px;
    transform-origin: 0% 50%;
    transform: rotateZ(0deg);
}

.antenna {
    left: -100px;
    top: 90px;
    transform-origin: 100% 65%;
    transform: rotateZ(0deg);
}
.mound-group {
    left: 115px;
    top: 110px;
    transform-origin: 110px 220px;
    transform: rotateZ(0deg);
}

.point3 {
    left: 125px;
    top: -13px;
    transform-origin: 50% 400%;
    transform: rotateZ(0deg);
}

.point2 {
    left: 50px;
    top: -22px;
    transform-origin: 120% 200%;
    transform: rotateZ(0deg);
}

.point1 {
    left: 4px;
    top: 55px;
    transform-origin: 150% 150%;
    transform: rotateZ(0deg);
}

.mound {}

.wind {
    left: 400px;
    top: 260px;
    transform-origin: 0% 90%;
    transform: rotateZ(0deg);
}

.cannon {
    left: 30px;
    top: 460px;
    transform-origin: 100% 60%;
    transform: rotateZ(0deg);
}

.main {
    left: 80px;
    top: 230px;
    transform-origin: 50% 50%;
    transform: rotateZ(0deg);
}

.blleg {
    left: 410px;
    top: 615px;
    transform-origin: 10px 15px;
    transform: rotateZ(0deg);
}

.blbottom-group {
    left: 0px;
    top: 60px;
    transform-origin: 10px 0px;
    transform: rotateZ(0deg);
}

.blfoot {
    left: -19px;
    top: 68px;
    transform-origin: 56% 44%;
    transform: rotateZ(0deg);
}

.blbottom {}

.bltop {}

.blcover {
    left: 360px;
    top: 573px;
}

.knob {
    left: 214px;
    top: 524px;
    transform-origin: 30% 63%;
    transform: rotateZ(0deg);
}

.tele {
    left: 90px;
    top: 430px;
    transform-origin: 90% 50%;
    transform: rotateZ(0deg);
}

.telecover {
    left: 161px;
    top: 399px;
}

.flleg {
    left: 250px;
    top: 615px;
    transform-origin: 10px 15px;
    transform: rotateZ(0deg);
}

.flbottom-group {
    left: 0px;
    top: 60px;
    transform-origin: 10px 0px;
    transform: rotateZ(0deg);
}

.flfoot {
    left: -19px;
    top: 68px;
    transform-origin: 56% 44%;
    transform: rotateZ(0deg);
}

.flbottom {}

.fltop {}

.flcover {
    left: 244px;
    top: 567px;
}
</style>